<cp-profile-component #profileComponent>
  <div *ngIf="profileComponent.account">
    <h2>{{ profileComponent.account.userName }}</h2>
    <h3>{{ profileComponent.account.email }}</h3>
    <a href="http://my.homepage.me">http://my.homepage.me</a>
    <p>{{ profileComponent.account.organisation }}</p>
  </div>

  <button class="add-app-button btn btn-primary btn-sm" (click)="profileComponent.addCloudCredentialsFormShowing=!profileComponent.addCloudCredentialsFormShowing">
    <span class="glyphicon glyphicon-plus"></span>
  </button>

  <div *ngIf="profileComponent.addCloudCredentialsFormShowing">
    <form [formGroup]="profileComponent.cloudCredentialsForm" autocomplete="off">
      <h3>Add cloud credentials</h3>
      <label for="inputUri" class="sr-only">URI</label>
      <!--Name-->
      <input class="form-control" id="name" 
        type="text" placeholder="Credentials name" [formControl]="profileComponent.cloudCredentialsForm.controls['name']" autofocus>
      <div *ngIf="!profileComponent.cloudCredentialsForm.controls['name'].valid" class="ui error message">Name is invalid</div>
      <div *ngIf="profileComponent.cloudCredentialsForm.controls['name'].hasError('required')" class="ui error message">Name is required</div>
      <!--Provider-->
      <input class="form-control" id="cloudProvider" 
        type="text" placeholder="Cloud provider" [formControl]="profileComponent.cloudCredentialsForm.controls['cloudProvider']" autofocus>
      <div *ngIf="!profileComponent.cloudCredentialsForm.controls['cloudProvider'].valid" class="ui error message">Provider is invalid</div>
      <div *ngIf="profileComponent.cloudCredentialsForm.controls['cloudProvider'].hasError('required')" class="ui error message">Provider is required</div>
      <!--Fields-->
      <input class="form-control" id="fields" 
        type="text" placeholder="Credentials fields" [formControl]="profileComponent.cloudCredentialsForm.controls['fields']" autofocus>
      <div *ngIf="!profileComponent.cloudCredentialsForm.controls['fields'].valid" class="ui error message">Fields are invalid</div>
      <div *ngIf="profileComponent.cloudCredentialsForm.controls['fields'].hasError('required')" class="ui error message">Fields are required</div>
      <button type="button" class="btn btn-lg btn-primary btn-block"
      (click)="profileComponent.addCloudCredentials(profileComponent.cloudCredentialsForm.value); profileComponent.addCloudCredentialsFormShowing = false">Add</button>
    </form>
  </div>

  <accordion [closeOthers]="oneAtATime" *ngIf="profileComponent.cloudProviderParametersPresenters">
    <div *ngIf="profileComponent.cloudProviderParametersPresenters.length==0">
      No credentials registered yet
    </div>
      <h3>Your own Cloud Providers</h3>
    <accordion-group *ngFor="let cloudProviderParameters of profileComponent.cloudProviderParametersPresenters" heading="{{ cloudProviderParameters.name }}">
      <div>
        <h4>Provider</h4>
        <p>{{ cloudProviderParameters.cloudProvider }}</p>
        <h4>Fields</h4>
        <div *ngFor="let cloudProviderParametersField of cloudProviderParameters.fields">
          <h5>{{ cloudProviderParametersField.key }}</h5>
          <p>{{ cloudProviderParametersField.value }}</p>
        </div>
        <button type="button" class="btn btn-primary btn-sm"
        (click)="profileComponent.removeCloudProviderParameters(cloudProviderParameters)">Remove</button>
      </div>
    </accordion-group>
    <h3>Shared with your</h3>
    <accordion-group *ngFor="let cloudProviderParameters of profileComponent.sharedCloudProviderParametersPresenters" heading="{{ cloudProviderParameters.name }} SHARED">
      <div>
        <h4>Provider</h4>
        <p>{{ cloudProviderParameters.cloudProvider }}</p>
        <h4>Fields</h4>
        <div *ngFor="let cloudProviderParametersField of cloudProviderParameters.fields">
          <h5>{{ cloudProviderParametersField.key }}</h5>
          <p>{{ cloudProviderParametersField.value }}</p>
        </div>
        <button type="button" class="btn btn-primary btn-sm"
        (click)="profileComponent.removeCloudProviderParameters(cloudProviderParameters)">Remove</button>
      </div>
    </accordion-group>
  </accordion>
</cp-profile-component>